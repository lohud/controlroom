<!Doctype HTML>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
	<meta name="title" content="" >
	<meta name="description" content="">
    
	<meta property="og:title" content="">
    <meta property="og:description" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <meta property="og:type" content="website">

    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	
	<!--Jquery conditional loader-->
	<!--[if lt IE 9]>
	    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
	<![endif]-->
	<!--[if gte IE 9]><!-->
	    <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
	<!--<![endif]-->
	
	<!--
	JQuery UI
	<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script>
	<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/smoothness/jquery-ui.css" />
	-->

	
	<!-- Fontawesome -->
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	<link href='http://fonts.googleapis.com/css?family=Roboto:400italic,300,700,300italic,400' rel='stylesheet' type='text/css'>

	

	<link rel="stylesheet" href="css/foundation.min.css" />
	<link rel="stylesheet" href="css/base.css" />
	<link rel="stylesheet" type="text/css" href="css/custom.css">
	<script src="js/vendor/modernizr.js"></script>
	<script src="js/vendor/jquery.js"></script>

	<!--
	Mapbox
	<script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.2/mapbox.js'></script>
	<link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.2/mapbox.css' rel='stylesheet' />
	-->
	
	
	<style>
div {
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
    
}

        #roadways, #cameras{
            display:inline-block;
            vertical-align:top;
        }
        
        #roadways{
            width:100%%;
        }
        
        #cameras{
            /*width:100%;*/
        }
        
        .camera{
            display:inline-block;
            padding:0px;
        }

	</style>
</head>
<body>
	<!--**********Content starts**********-->
        
    
    <div class="row">
    	<div class="large-2 columns">
    		<div id="roadways"></div>
    	</div>
    	<div class="large-10 columns">
    		<div class="large-12 columns" id="cameras" data-equalizer>
    			<!-- <div id="cameras"></div> -->
    		</ul>
    	</div>
    </div>


	<!--**********Content ends**********-->

	<script>
        
        var roadindex = {},
        roaddata;
        
        $.getJSON('data.php', function(data){
            roaddata = data;
            
            //Create a new object to hold index position of cameras per roadway
            for (var i=0, f=data.length;i<f;i++){
                if (!(data[i].RoadwayName in roadindex)){
                    roadindex[data[i].RoadwayName] = [];
                }
                roadindex[data[i].RoadwayName].push(i);                
            }
            
            
            //Build a link list of unique roadways
            for (var roadway in roadindex){
                var link = '<a href="#" class="roadway-link">'+roadway+'</a><br>';
                $('#roadways').append(link);
            }        
        })
        
        
        //Event handler for the links
        $('body').on('click', '.roadway-link', function(e){
            e.preventDefault();
            var index = $(this).text();
            var range = roadindex[index];
            
            $('#cameras').empty();
            for (var i=0, f=range.length; i<f;i++){
                console.log(roaddata[range[i]].Url);
                $('#cameras').append('<div class="large-4 columns medium-6 small-12 nopad end" data-equalizer-watch><div class="camera cards"><paper-ripple class="recenteringTouch" fit></paper-ripple><div style="background-image:url('+roaddata[range[i]].Url+')"><img src="assets/canvas.png"></div><h1>'+roaddata[range[i]].Name+'</h1><p>Test</p><p>Test line 2</p></div></div>');
                
            }
        })

	</script>
	<script src="js/vendor/jquery.js"></script>
	<script src="js/foundation.min.js"></script>
	<script src="js/foundation/foundation.equalizer.js"></script>

	<script>
	  $(document).foundation();
	</script>
</body>
</html>