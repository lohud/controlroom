
<!Doctype HTML>
<html>
<head>
    <title></title>
    <meta charset="utf-8">
    <meta name="title" content="" >
    <meta name="description" content="">
    
    <meta property="og:title" content="">
    <meta property="og:description" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <meta property="og:type" content="website">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">


    
    <!--Jquery conditional loader-->
    <!--[if lt IE 9]>
        <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
        <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <!--<![endif]-->
    
    
    <!-- Fontawesome -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400italic,300,700,300italic,400' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/foundation.min.css" />
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" type="text/css" href="css/custom.css">
    <script src="js/vendor/modernizr.js"></script>
    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script src="js/foundation/foundation.equalizer.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/3.5.2/select2.min.js"></script>

    
    
    
    <style>
        div {
            -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
            -moz-box-sizing: border-box;    /* Firefox, other Gecko */
            box-sizing: border-box;         /* Opera/IE 8+ */
            
        }

        .select2-hidden-accessible {
            display: none !important; 
            visibility: hidden !important;
        }

        #roadways, #cameras{
            display:inline-block;
            vertical-align:top;
        }
        
        #roadways{
            width:100%%;
        }
        
        #cameras{
            /*width:100%;*/
        }
        
        .camera{
            display:inline-block;
            padding:0px;
        }
        
        #roadways{
            width:300px;
        }

    </style>
</head>
<body>
    <!--**********Content starts**********-->
        
    
    <div class="row">
        <div class="large-2 columns nopad">
            <!-- <h1 class="textnopad">Type or select the roadway</h1> -->
            <select id="roadways" multiple="multiple"></select>
        </div>
        <div class="large-10 columns">
            <div class="large-12 columns" id="cameras" data-equalizer>
                <!-- <div id="cameras"></div> -->
            </ul>
        </div>
    </div>


    <!--**********Content ends**********-->

    <script>
        
        var roadindex = {},
        roaddata;
        
        $.getJSON('data.php', function(data){
            roaddata = data;
            
            //Create a new object to hold index position of cameras per roadway
            for (var i=0, f=data.length;i<f;i++){
                if (!(data[i].RoadwayName in roadindex)){
                    roadindex[data[i].RoadwayName] = [];
                }
                roadindex[data[i].RoadwayName].push(i);                
            }
            
            
            //Build a link list of unique roadways
            for (var roadway in roadindex){
                var link = '<option class="roadway-link">'+roadway+'</option>';
                $('#roadways').append(link);
            }
            $('select').select2({
                placeholder: "Type or select roadways"
            });
        })
        
        

        $('#roadways').change(function(){ 
           var roadindex = $(this).val();
            console.log(roadindex)
           
           $('#cameras').empty();
           for (var i=0, f=roaddata.length; i<f;i++){
               if (roadindex.indexOf(roaddata[i].RoadwayName) > -1){
                   console.log(roaddata[i].Url);
                   $('#cameras').append('<div class="large-4 columns medium-6 small-12 nopad end" data-equalizer-watch><div class="camera cards"><div style="background-image:url('+roaddata[i].Url+')"><img src="assets/canvas.png"></div><h1>'+roaddata[i].Name+'</h1></div></div>');
               }
           }
        });
    </script>
    <script>
      $(document).foundation();
    </script>
</body>
</html>